{
  "title": "A2UI Client Event Message",
  "description": "A message sent from the client to the server. Exactly ONE of the properties in this object must be set.",
  "type": "object",
  "properties": {
    "userAction": {
      "title": "User Action",
      "description": "Represents a user-initiated action, sent from the client to the server.",
      "type": "object",
      "properties": {
        "actionName": {
          "type": "string",
          "description": "The name of the action, taken from the component's `action.action` property."
        },
        "surfaceId": {
          "type": "string",
          "description": "The `id` of the surface that the event originated from."
        },
        "sourceComponentId": {
          "type": "string",
          "description": "The `id` of the component that triggered the event."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "An ISO 8601 timestamp of when the event occurred."
        },
        "context": {
          "type": "object",
          "description": "A JSON object containing the key-value pairs from the component's `action.context`, after resolving all data bindings.",
          "additionalProperties": true
        }
      },
      "required": [
        "actionName",
        "sourceComponentId",
        "timestamp",
        "context"
      ]
    },
    "clientUiCapabilities": {
      "title": "Client Capabilities",
      "description": "A message from the client describing its capabilities, such as the component catalogs it supports.",
      "type": "object",
      "properties": {
        "catalogs": {
          "type": "array",
          "description": "An array of component catalogs supported by the client.",
          "items": {
            "type": "object",
            "description": "A description of a supported catalog. Exactly one of 'catalogUri' or 'dynamicCatalog' must be provided.",
            "properties": {
              "catalogUri": {
                "type": "string",
                "description": "A URI pointing to a predefined, well-known component catalog schema."
              },
              "dynamicCatalog": {
                "type": "object",
                "description": "An inline definition of a component catalog.",
                "properties": {
                  "dynamicCatalogUri": {
                    "type": "string",
                    "description": "A client-defined URI to uniquely identify this dynamic catalog. The server will use this URI in the 'beginRendering' message to select this catalog."
                  },
                  "catalog": {
                    "$ref": "https://raw.githubusercontent.com/google/a2ui/refs/heads/main/schemas/v0.1/catalog.json"
                  }
                },
                "required": [
                  "dynamicCatalogUri",
                  "catalog"
                ]
              }
            },
            "oneOf": [
              {
                "required": [
                  "catalogUri"
                ]
              },
              {
                "required": [
                  "dynamicCatalog"
                ]
              }
            ]
          }
        }
      },
      "required": [
        "catalogs"
      ]
    },
    "error": {
      "title": "Client Error",
      "description": "A message from the client indicating an error occurred, for example, during UI rendering.",
      "type": "object",
      "additionalProperties": true
    }
  }
}