{
  "schema": "server_to_client.json",
  "tests": [
    {
      "description": "CallFunctionMessage: Valid with wantResponse",
      "valid": true,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "openUrl",
          "args": {
            "url": "https://example.com"
          },
          "returnType": "void",
          "allowRemote": true
        },
        "callId": "unique-call-id-123",
        "wantResponse": true
      }
    },
    {
      "description": "CallFunctionMessage: Valid without wantResponse",
      "valid": true,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "openUrl",
          "args": {
            "url": "https://example.com"
          },
          "returnType": "void",
          "allowRemote": true
        },
        "callId": "unique-call-id-124"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid (missing callId)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": { "value": "bar" },
          "returnType": "boolean",
          "allowRemote": true
        }
      }
    },
    {
      "description": "CallFunctionMessage: Invalid (missing callFunction)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callId": "unique-call-id-125"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid (`allowRemote` is false)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": { "value": "bar" },
          "returnType": "boolean",
          "allowRemote": false
        },
        "callId": "unique-call-id-126"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid (`allowRemote` is missing)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": { "value": "bar" },
          "returnType": "boolean"
        },
        "callId": "unique-call-id-126b"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid args (nested object in a single value)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": {
            "value": { "nested": "object" }
          },
          "returnType": "boolean",
          "allowRemote": true
        },
        "callId": "unique-call-id-127"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid args (array of nested objects)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": {
            "value": [{ "nested": "object" }]
          },
          "returnType": "boolean",
          "allowRemote": true
        },
        "callId": "unique-call-id-128"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid returnType (not a scalar)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": { "value": "bar" },
          "returnType": "object",
          "allowRemote": true
        },
        "callId": "unique-call-id-129"
      }
    },
    {
      "description": "CallFunctionMessage: Invalid call to local-only function (required)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "callFunction": {
          "call": "required",
          "args": {
            "value": "test"
          },
          "returnType": "boolean",
          "allowRemote": true
        },
        "callId": "id-3"
      }
    }
  ]
}
