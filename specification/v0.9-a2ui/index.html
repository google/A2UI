
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="A2UI, a streaming protocol for Agent-Driven User Interfaces" name="description"/>
<meta content="Google" name="author"/>
<link href="https://a2ui.org/specification/v0.9-a2ui/" rel="canonical"/>
<link href="../v0.8-a2a-extension/" rel="prev"/>
<link href="../v0.9-evolution-guide/" rel="next"/>
<link href="../../assets/A2UI_dark.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>A2UI Specification - A2UI</title>
<link href="../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M64%20480c-35.3%200-64-28.7-64-64V96c0-35.3%2028.7-64%2064-64h320c35.3%200%2064%2028.7%2064%2064v213.5c0%2017-6.7%2033.3-18.7%2045.3L322.7%20461.3c-12%2012-28.3%2018.7-45.3%2018.7zm325.5-176H296c-13.3%200-24%2010.7-24%2024v93.5z%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M384%20512H96c-53%200-96-43-96-96V96C0%2043%2043%200%2096%200h304c26.5%200%2048%2021.5%2048%2048v288c0%2020.9-13.4%2038.7-32%2045.3V448c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032zM96%20384c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h256v-64zm32-232c0%2013.3%2010.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24H152c-13.3%200-24%2010.7-24%2024m24%2072c-13.3%200-24%2010.7-24%2024s10.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24z%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m-32-352a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200m-8%2064h48c13.3%200%2024%2010.7%2024%2024v88h8c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-80c-13.3%200-24-10.7-24-24s10.7-24%2024-24h24v-64h-24c-13.3%200-24-10.7-24-24s10.7-24%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M461.2%2018.9C472.7%2024%20480%2035.4%20480%2048v416c0%2012.6-7.3%2024-18.8%2029.1s-24.8%203.2-34.3-5.1l-46.6-40.7c-43.6-38.1-98.7-60.3-156.4-63V480c0%2017.7-14.3%2032-32%2032h-32c-17.7%200-32-14.3-32-32v-96C57.3%20384%200%20326.7%200%20256s57.3-128%20128-128h84.5c61.8-.2%20121.4-22.7%20167.9-63.3L427%2024c9.4-8.3%2022.9-10.2%2034.3-5.1zM224%20320v.2c70.3%202.7%20137.8%2028.5%20192%2073.4V118.3c-54.2%2044.9-121.7%2070.7-192%2073.4z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M434.8%2070.1c14.3%2010.4%2017.5%2030.4%207.1%2044.7l-256%20352c-5.5%207.6-14%2012.3-23.4%2013.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l101.5%20101.5%20234-321.7c10.4-14.3%2030.4-17.5%2044.7-7.1z%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m0-336c-17.7%200-32%2014.3-32%2032%200%2013.3-10.7%2024-24%2024s-24-10.7-24-24c0-44.2%2035.8-80%2080-80s80%2035.8%2080%2080c0%2047.2-36%2067.2-56%2074.5v3.8c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24v-8.1c0-20.5%2014.8-35.2%2030.1-40.2%206.4-2.1%2013.2-5.5%2018.2-10.3%204.3-4.2%207.7-10%207.7-19.6%200-17.7-14.3-32-32-32zm-32%20192a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%200c14.7%200%2028.2%208.1%2035.2%2021l216%20400c6.7%2012.4%206.4%2027.4-.8%2039.5S486.1%20480%20472%20480H40c-14.1%200-27.2-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9%2020.5-21%2035.2-21m0%20352a32%2032%200%201%200%200%2064%2032%2032%200%201%200%200-64m0-192c-18.2%200-32.7%2015.5-31.4%2033.7l7.4%20104c.9%2012.5%2011.4%2022.3%2023.9%2022.3%2012.6%200%2023-9.7%2023.9-22.3l7.4-104c1.3-18.2-13.1-33.7-31.4-33.7z%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M480-16c6.9%200%2013%204.4%2015.2%2010.9l13.5%2040.4%2040.4%2013.5C555.6%2051%20560%2057.1%20560%2064s-4.4%2013-10.9%2015.2l-40.4%2013.5-13.5%2040.4c-2.2%206.5-8.3%2010.9-15.2%2010.9s-13-4.4-15.2-10.9l-13.5-40.4-40.4-13.5C404.4%2077%20400%2070.9%20400%2064s4.4-13%2010.9-15.2l40.4-13.5%2013.5-40.4C467-11.6%20473.1-16%20480-16M321.4%2097.4c12.5-12.5%2032.8-12.5%2045.3%200l80%2080c12.5%2012.5%2012.5%2032.8%200%2045.3l-10.9%2010.9c7.9%2022%2012.2%2045.7%2012.2%2070.5%200%20114.9-93.1%20208-208%20208S32%20418.9%2032%20304%20125.1%2096%20240%2096c24.7%200%2048.5%204.3%2070.5%2012.3zM144%20304c0-53%2043-96%2096-96%2013.3%200%2024-10.7%2024-24s-10.7-24-24-24c-79.5%200-144%2064.5-144%20144%200%2013.3%2010.7%2024%2024%2024s24-10.7%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M416%20427.4c58.5-44%2096-111.6%2096-187.4C512%20107.5%20397.4%200%20256%200S0%20107.5%200%20240c0%2075.8%2037.5%20143.4%2096%20187.4V464c0%2026.5%2021.5%2048%2048%2048h32v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h64v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h32c26.5%200%2048-21.5%2048-48zM96%20256a64%2064%200%201%201%20128%200%2064%2064%200%201%201-128%200m256-64a64%2064%200%201%201%200%20128%2064%2064%200%201%201%200-128%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M352%200c0-17.7-14.3-32-32-32s-32%2014.3-32%2032v64h-96c-53%200-96%2043-96%2096v224c0%2053%2043%2096%2096%2096h256c53%200%2096-43%2096-96V160c0-53-43-96-96-96h-96zM160%20368c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24M224%20176a48%2048%200%201%201%200%2096%2048%2048%200%201%201%200-96m144%2048a48%2048%200%201%201%2096%200%2048%2048%200%201%201-96%200m-304%200c0-17.7-14.3-32-32-32S0%20206.3%200%20224v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32zm544-32c-17.7%200-32%2014.3-32%2032v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32v-96c0-17.7-14.3-32-32-32%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M288%200H128c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032v151.5L7.5%20426.3C2.6%20435%200%20444.7%200%20454.7%200%20486.4%2025.6%20512%2057.3%20512h333.4c31.6%200%2057.3-25.6%2057.3-57.3%200-10-2.6-19.8-7.5-28.4L320%20215.5V64c17.7%200%2032-14.3%2032-32S337.7%200%20320%200zm-96%20215.5V64h64v151.5c0%2011.1%202.9%2022.1%208.4%2031.8L306%20320H142l41.6-72.7c5.5-9.7%208.4-20.6%208.4-31.8%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20216C0%20149.7%2053.7%2096%20120%2096h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064H64c-35.3%200-64-28.7-64-64zm256%200c0-66.3%2053.7-120%20120-120h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064h-64c-35.3%200-64-28.7-64-64z%22/%3E%3C/svg%3E');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Google Sans";--md-code-font:"Roboto Mono"}</style>
<link href="../../stylesheets/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-YX9TPV8DCC"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-YX9TPV8DCC",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-YX9TPV8DCC",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
</head>
<body data-md-color-accent="light-blue" data-md-color-primary="teal" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#a2ui-protocol-v09-draft">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="A2UI" class="md-header__button md-logo" data-md-component="logo" href="../.." title="A2UI">
<img alt="logo" src="../../assets/A2UI_light.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            A2UI
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              A2UI Specification
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="teal" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="teal" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/google/A2UI" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    google/A2UI
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="A2UI" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="A2UI">
<img alt="logo" src="../../assets/A2UI_light.svg"/>
</a>
    A2UI
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/google/A2UI" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    google/A2UI
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Introduction &amp; FAQ
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Introduction &amp; FAQ
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../introduction/what-is-a2ui/">
<span class="md-ellipsis">
    
  
    What is A2UI?
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../introduction/who-is-it-for/">
<span class="md-ellipsis">
    
  
    Who is it For?
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../introduction/how-to-use/">
<span class="md-ellipsis">
    
  
    How Can I Use It?
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../introduction/where-is-it-used/">
<span class="md-ellipsis">
    
  
    Where is it Used?
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../introduction/agent-ui-ecosystem/">
<span class="md-ellipsis">
    
  
    Agent UI Ecosystem
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/">
<span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../composer/">
<span class="md-ellipsis">
    
  
    A2UI Composer ‚≠ê
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Developer Guides
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Developer Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/client-setup/">
<span class="md-ellipsis">
    
  
    Client Setup
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/agent-development/">
<span class="md-ellipsis">
    
  
    Agent Development
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/custom-components/">
<span class="md-ellipsis">
    
  
    Custom Components
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/theming/">
<span class="md-ellipsis">
    
  
    Theming &amp; Styling
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Core Concepts
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/data-flow/">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/components/">
<span class="md-ellipsis">
    
  
    Components &amp; Structure
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/data-binding/">
<span class="md-ellipsis">
    
  
    Data Binding
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Specifications
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Specifications
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    v0.8 (Stable)
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            
  
    v0.8 (Stable)
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../v0.8-a2ui/">
<span class="md-ellipsis">
    
  
    A2UI Specification
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../v0.8-a2a-extension/">
<span class="md-ellipsis">
    
  
    A2A Extension
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    v0.9 (Draft)
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
            
  
    v0.9 (Draft)
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    A2UI Specification
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    A2UI Specification
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
<span class="md-ellipsis">
      
        Introduction
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changes-from-previous-versions">
<span class="md-ellipsis">
      
        Changes from previous versions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#protocol-overview-data-flow">
<span class="md-ellipsis">
      
        Protocol overview &amp; data flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-decoupling">
<span class="md-ellipsis">
      
        Transport decoupling
      
    </span>
</a>
<nav aria-label="Transport decoupling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-transport-contract">
<span class="md-ellipsis">
      
        The transport contract
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-bindings">
<span class="md-ellipsis">
      
        Transport bindings
      
    </span>
</a>
<nav aria-label="Transport bindings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#a2a-agent2agent-binding">
<span class="md-ellipsis">
      
        A2A (Agent2Agent) binding
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ag-ui-agent-to-user-interface-binding">
<span class="md-ellipsis">
      
        AG UI (Agent to User Interface) binding
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#other-transports">
<span class="md-ellipsis">
      
        Other transports
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-protocol-schemas">
<span class="md-ellipsis">
      
        The protocol schemas
      
    </span>
</a>
<nav aria-label="The protocol schemas" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#common-types">
<span class="md-ellipsis">
      
        Common types
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#server-to-client-message-structure-the-envelope">
<span class="md-ellipsis">
      
        Server to client message structure: the envelope
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-standard-catalog">
<span class="md-ellipsis">
      
        The Standard Catalog
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#validator-compliance-custom-catalogs">
<span class="md-ellipsis">
      
        Validator compliance &amp; custom catalogs
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#envelope-message-structure">
<span class="md-ellipsis">
      
        Envelope message structure
      
    </span>
</a>
<nav aria-label="Envelope message structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#createsurface">
<span class="md-ellipsis">
      
        createSurface
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#updatecomponents">
<span class="md-ellipsis">
      
        updateComponents
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#updatedatamodel">
<span class="md-ellipsis">
      
        updateDataModel
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deletesurface">
<span class="md-ellipsis">
      
        deleteSurface
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-stream">
<span class="md-ellipsis">
      
        Example Stream
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#component-model">
<span class="md-ellipsis">
      
        Component model
      
    </span>
</a>
<nav aria-label="Component model" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-component-object">
<span class="md-ellipsis">
      
        The component object
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-component-catalog">
<span class="md-ellipsis">
      
        The component catalog
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ui-composition-the-adjacency-list-model">
<span class="md-ellipsis">
      
        UI composition: the adjacency list model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#defining-actions">
<span class="md-ellipsis">
      
        Defining actions
      
    </span>
</a>
<nav aria-label="Defining actions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#server-actions">
<span class="md-ellipsis">
      
        Server actions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#local-actions">
<span class="md-ellipsis">
      
        Local actions
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-model-representation-binding-scope">
<span class="md-ellipsis">
      
        Data model representation: binding, scope
      
    </span>
</a>
<nav aria-label="Data model representation: binding, scope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#path-resolution-scope">
<span class="md-ellipsis">
      
        Path resolution &amp; scope
      
    </span>
</a>
<nav aria-label="Path resolution &amp; scope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-root-scope">
<span class="md-ellipsis">
      
        The root scope
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#collection-scopes-relative-paths">
<span class="md-ellipsis">
      
        Collection scopes (relative paths)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-scope-resolution">
<span class="md-ellipsis">
      
        Example: scope resolution
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#type-conversion">
<span class="md-ellipsis">
      
        Type conversion
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#two-way-binding-input-components">
<span class="md-ellipsis">
      
        Two-way binding &amp; input components
      
    </span>
</a>
<nav aria-label="Two-way binding &amp; input components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-readwrite-contract">
<span class="md-ellipsis">
      
        The read/write contract
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reactivity">
<span class="md-ellipsis">
      
        Reactivity
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#server-synchronization">
<span class="md-ellipsis">
      
        Server synchronization
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-form-submission-pattern">
<span class="md-ellipsis">
      
        Example: form submission pattern
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-model-updates-synchronization-and-convergence">
<span class="md-ellipsis">
      
        Data model updates: synchronization and convergence
      
    </span>
</a>
<nav aria-label="Data model updates: synchronization and convergence" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#server-to-client-updates">
<span class="md-ellipsis">
      
        Server to client updates
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-to-server-updates">
<span class="md-ellipsis">
      
        Client to server updates
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-side-logic-validation">
<span class="md-ellipsis">
      
        Client-side logic &amp; validation
      
    </span>
</a>
<nav aria-label="Client-side logic &amp; validation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#registered-functions">
<span class="md-ellipsis">
      
        Registered functions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-button-validation">
<span class="md-ellipsis">
      
        Example: button validation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-component-catalog">
<span class="md-ellipsis">
      
        Standard Component Catalog
      
    </span>
</a>
<nav aria-label="Standard Component Catalog" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#components">
<span class="md-ellipsis">
      
        Components
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#functions">
<span class="md-ellipsis">
      
        Functions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#theme">
<span class="md-ellipsis">
      
        Theme
      
    </span>
</a>
<nav aria-label="Theme" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#identity-and-attribution">
<span class="md-ellipsis">
      
        Identity and attribution
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-formatstring-function">
<span class="md-ellipsis">
      
        The formatString function
      
    </span>
</a>
<nav aria-label="The formatString function" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-syntax">
<span class="md-ellipsis">
      
        formatString syntax
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-data-model-binding">
<span class="md-ellipsis">
      
        formatString data model binding
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-client-side-functions">
<span class="md-ellipsis">
      
        formatString client-side functions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-nested-interpolation">
<span class="md-ellipsis">
      
        formatString nested interpolation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-type-conversion">
<span class="md-ellipsis">
      
        formatString type conversion
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-pattern-the-prompt-generate-validate-loop">
<span class="md-ellipsis">
      
        Usage pattern: the prompt-generate-validate loop
      
    </span>
</a>
<nav aria-label="Usage pattern: the prompt-generate-validate loop" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-validation-error-format">
<span class="md-ellipsis">
      
        Standard validation error format
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-to-server-messages">
<span class="md-ellipsis">
      
        Client-to-server messages
      
    </span>
</a>
<nav aria-label="Client-to-server messages" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#action">
<span class="md-ellipsis">
      
        action
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-capabilities-metadata">
<span class="md-ellipsis">
      
        Client capabilities &amp; metadata
      
    </span>
</a>
<nav aria-label="Client capabilities &amp; metadata" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#client-capabilities">
<span class="md-ellipsis">
      
        Client capabilities
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-data-model">
<span class="md-ellipsis">
      
        Client data model
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error">
<span class="md-ellipsis">
      
        error
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../v0.9-evolution-guide/">
<span class="md-ellipsis">
    
  
    Evolution Guide
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../catalogs/">
<span class="md-ellipsis">
    
  
    Catalogs
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../renderers/">
<span class="md-ellipsis">
    
  
    Renderers (Clients)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../transports/">
<span class="md-ellipsis">
    
  
    Transports (Message Passing)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../agents/">
<span class="md-ellipsis">
    
  
    Agents (Server-side)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../community/">
<span class="md-ellipsis">
    
  
    Community
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../roadmap/">
<span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_14">
<span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/components/">
<span class="md-ellipsis">
    
  
    Component Reference
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/messages/">
<span class="md-ellipsis">
    
  
    Message Reference
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
<span class="md-ellipsis">
      
        Introduction
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changes-from-previous-versions">
<span class="md-ellipsis">
      
        Changes from previous versions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#protocol-overview-data-flow">
<span class="md-ellipsis">
      
        Protocol overview &amp; data flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-decoupling">
<span class="md-ellipsis">
      
        Transport decoupling
      
    </span>
</a>
<nav aria-label="Transport decoupling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-transport-contract">
<span class="md-ellipsis">
      
        The transport contract
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-bindings">
<span class="md-ellipsis">
      
        Transport bindings
      
    </span>
</a>
<nav aria-label="Transport bindings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#a2a-agent2agent-binding">
<span class="md-ellipsis">
      
        A2A (Agent2Agent) binding
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ag-ui-agent-to-user-interface-binding">
<span class="md-ellipsis">
      
        AG UI (Agent to User Interface) binding
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#other-transports">
<span class="md-ellipsis">
      
        Other transports
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-protocol-schemas">
<span class="md-ellipsis">
      
        The protocol schemas
      
    </span>
</a>
<nav aria-label="The protocol schemas" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#common-types">
<span class="md-ellipsis">
      
        Common types
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#server-to-client-message-structure-the-envelope">
<span class="md-ellipsis">
      
        Server to client message structure: the envelope
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-standard-catalog">
<span class="md-ellipsis">
      
        The Standard Catalog
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#validator-compliance-custom-catalogs">
<span class="md-ellipsis">
      
        Validator compliance &amp; custom catalogs
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#envelope-message-structure">
<span class="md-ellipsis">
      
        Envelope message structure
      
    </span>
</a>
<nav aria-label="Envelope message structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#createsurface">
<span class="md-ellipsis">
      
        createSurface
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#updatecomponents">
<span class="md-ellipsis">
      
        updateComponents
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#updatedatamodel">
<span class="md-ellipsis">
      
        updateDataModel
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deletesurface">
<span class="md-ellipsis">
      
        deleteSurface
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-stream">
<span class="md-ellipsis">
      
        Example Stream
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#component-model">
<span class="md-ellipsis">
      
        Component model
      
    </span>
</a>
<nav aria-label="Component model" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-component-object">
<span class="md-ellipsis">
      
        The component object
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-component-catalog">
<span class="md-ellipsis">
      
        The component catalog
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ui-composition-the-adjacency-list-model">
<span class="md-ellipsis">
      
        UI composition: the adjacency list model
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#defining-actions">
<span class="md-ellipsis">
      
        Defining actions
      
    </span>
</a>
<nav aria-label="Defining actions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#server-actions">
<span class="md-ellipsis">
      
        Server actions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#local-actions">
<span class="md-ellipsis">
      
        Local actions
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-model-representation-binding-scope">
<span class="md-ellipsis">
      
        Data model representation: binding, scope
      
    </span>
</a>
<nav aria-label="Data model representation: binding, scope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#path-resolution-scope">
<span class="md-ellipsis">
      
        Path resolution &amp; scope
      
    </span>
</a>
<nav aria-label="Path resolution &amp; scope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-root-scope">
<span class="md-ellipsis">
      
        The root scope
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#collection-scopes-relative-paths">
<span class="md-ellipsis">
      
        Collection scopes (relative paths)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-scope-resolution">
<span class="md-ellipsis">
      
        Example: scope resolution
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#type-conversion">
<span class="md-ellipsis">
      
        Type conversion
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#two-way-binding-input-components">
<span class="md-ellipsis">
      
        Two-way binding &amp; input components
      
    </span>
</a>
<nav aria-label="Two-way binding &amp; input components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-readwrite-contract">
<span class="md-ellipsis">
      
        The read/write contract
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reactivity">
<span class="md-ellipsis">
      
        Reactivity
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#server-synchronization">
<span class="md-ellipsis">
      
        Server synchronization
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-form-submission-pattern">
<span class="md-ellipsis">
      
        Example: form submission pattern
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-model-updates-synchronization-and-convergence">
<span class="md-ellipsis">
      
        Data model updates: synchronization and convergence
      
    </span>
</a>
<nav aria-label="Data model updates: synchronization and convergence" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#server-to-client-updates">
<span class="md-ellipsis">
      
        Server to client updates
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-to-server-updates">
<span class="md-ellipsis">
      
        Client to server updates
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-side-logic-validation">
<span class="md-ellipsis">
      
        Client-side logic &amp; validation
      
    </span>
</a>
<nav aria-label="Client-side logic &amp; validation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#registered-functions">
<span class="md-ellipsis">
      
        Registered functions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-button-validation">
<span class="md-ellipsis">
      
        Example: button validation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-component-catalog">
<span class="md-ellipsis">
      
        Standard Component Catalog
      
    </span>
</a>
<nav aria-label="Standard Component Catalog" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#components">
<span class="md-ellipsis">
      
        Components
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#functions">
<span class="md-ellipsis">
      
        Functions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#theme">
<span class="md-ellipsis">
      
        Theme
      
    </span>
</a>
<nav aria-label="Theme" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#identity-and-attribution">
<span class="md-ellipsis">
      
        Identity and attribution
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-formatstring-function">
<span class="md-ellipsis">
      
        The formatString function
      
    </span>
</a>
<nav aria-label="The formatString function" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-syntax">
<span class="md-ellipsis">
      
        formatString syntax
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-data-model-binding">
<span class="md-ellipsis">
      
        formatString data model binding
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-client-side-functions">
<span class="md-ellipsis">
      
        formatString client-side functions
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-nested-interpolation">
<span class="md-ellipsis">
      
        formatString nested interpolation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formatstring-type-conversion">
<span class="md-ellipsis">
      
        formatString type conversion
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-pattern-the-prompt-generate-validate-loop">
<span class="md-ellipsis">
      
        Usage pattern: the prompt-generate-validate loop
      
    </span>
</a>
<nav aria-label="Usage pattern: the prompt-generate-validate loop" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-validation-error-format">
<span class="md-ellipsis">
      
        Standard validation error format
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-to-server-messages">
<span class="md-ellipsis">
      
        Client-to-server messages
      
    </span>
</a>
<nav aria-label="Client-to-server messages" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#action">
<span class="md-ellipsis">
      
        action
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-capabilities-metadata">
<span class="md-ellipsis">
      
        Client capabilities &amp; metadata
      
    </span>
</a>
<nav aria-label="Client capabilities &amp; metadata" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#client-capabilities">
<span class="md-ellipsis">
      
        Client capabilities
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-data-model">
<span class="md-ellipsis">
      
        Client data model
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error">
<span class="md-ellipsis">
      
        error
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<nav aria-label="Navigation" class="md-path">
<ol class="md-path__list">
<li class="md-path__item">
<a class="md-path__link" href="../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="../v0.8-a2ui/">
<span class="md-ellipsis">
    Specifications
  </span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="./">
<span class="md-ellipsis">
    v0.9 (Draft)
  </span>
</a>
</li>
</ol>
</nav>
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/google/A2UI/raw/main/docs/specification/v0.9-a2ui.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
</a>
<h1 id="a2ui-protocol-v09-draft">A2UI Protocol v0.9 (Draft)<a class="headerlink" href="#a2ui-protocol-v09-draft" title="Permanent link">¬∂</a></h1>
<div class="admonition warning">
<p class="admonition-title">Draft Status</p>
<p>Version 0.9 is currently in draft status. For production use, consider <a href="../v0.8-a2ui/">v0.8 (Stable)</a>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Living Document</p>
<p>This specification is automatically included from <code>specification/v0_9/docs/a2ui_protocol.md</code>. Any updates to the specification will automatically appear here.</p>
</div>
<p><strong>See also:</strong>
- <a href="../v0.8-a2ui/">v0.8 Protocol Specification</a> (Stable)
- <a href="../v0.9-evolution-guide/">Evolution Guide: v0.8 ‚Üí v0.9</a></p>
<hr/>
<!-- markdownlint-disable MD041 -->
<!-- markdownlint-disable MD033 -->
<!-- markdownlint-disable MD034 -->
<div style="text-align: center;">
<div class="centered-logo-text-group">
<img alt="A2UI Protocol Logo" src="../../../assets/A2UI_dark.svg" width="100"/>
<h1>A2UI (Agent to UI) Protocol v0.9</h1>
</div>
</div>
<p>A Specification for a JSON-Based, Streaming UI Protocol.</p>
<p><strong>Version:</strong> 0.9
<strong>Status:</strong> Draft
<strong>Created:</strong> Nov 20, 2025
<strong>Last Updated:</strong> Dec 3, 2025</p>
<p>A Specification for a JSON-Based, Streaming UI Protocol</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¬∂</a></h2>
<p>The A2UI Protocol is designed for dynamically rendering user interfaces from a stream of JSON objects sent from a server (Agent). Its core philosophy emphasizes a clean separation of UI structure and application data, enabling progressive rendering as the client processes each message.</p>
<p>Communication occurs via a stream of JSON objects. The client parses each object as a distinct message and incrementally builds or updates the UI. The server-to-client protocol defines four message types:</p>
<ul>
<li><code>createSurface</code>: Signals the client to create a new surface and begin rendering it.</li>
<li><code>updateComponents</code>: Provides a list of component definitions to be added to or updated in a specific surface.</li>
<li><code>updateDataModel</code>: Provides new data to be inserted into or to replace a surface's data model.</li>
<li><code>deleteSurface</code>: Explicitly removes a surface and its contents from the UI.</li>
</ul>
<h2 id="changes-from-previous-versions">Changes from previous versions<a class="headerlink" href="#changes-from-previous-versions" title="Permanent link">¬∂</a></h2>
<p>Version 0.9 of the A2UI protocol represents a philosophical shift from previous versions. While v0.8 was optimized for LLMs that support structured output, v0.9 is designed to be embedded directly within a model's prompt. The LLM is then asked to produce JSON that matches the provided examples and schema descriptions.</p>
<p>This "prompt-first" approach offers several advantages:</p>
<ol>
<li><strong>Richer schema:</strong> The protocol is no longer limited by the constraints of structured output formats. This allows for more readable, complex, and expressive component catalogs.</li>
<li><strong>Modularity:</strong> The schema is now refactored into separate, more manageable components (e.g., [<code>common_types.json</code>], [<code>standard_catalog.json</code>], [<code>server_to_client.json</code>]), improving maintainability and modularity.</li>
</ol>
<p>The main disadvantage of this approach is that it requires more complex post-generation validation, as the LLM is not strictly constrained by the schema. This requires robust error handling and correction, so the system can identify discrepancies and attempt to fix them before rendering, or request a retry or correction from the LLM.</p>
<p>See <a href="evolution_guide.md">the evolution guide</a> for a detailed explanation of the differences between v0.8 and v0.9.</p>
<h2 id="protocol-overview-data-flow">Protocol overview &amp; data flow<a class="headerlink" href="#protocol-overview-data-flow" title="Permanent link">¬∂</a></h2>
<p>The A2UI protocol uses a unidirectional stream of JSON messages from the server to the client to describe and update the UI. The client consumes this stream, builds the UI, and renders it. User interactions are handled separately, typically by sending events to a different endpoint, which may in turn trigger new messages on the UI stream.</p>
<p>Here is an example sequence of events (which don't have to be in exactly this order):</p>
<ol>
<li><strong>Create Surface:</strong> The server sends a <code>createSurface</code> message to initialize the surface.</li>
<li><strong>Update Surface:</strong> Once a surface has been created, the server sends one or more <code>updateComponents</code> messages containing the definitions for all the components that will be part of the surface.</li>
<li><strong>Update Data Model:</strong> Once a surface has been created, the server can send <code>updateDataModel</code> messages at any time to populate or change the data that the UI components will display.</li>
<li><strong>Render:</strong> The client renders the UI for the surface, using the component definitions to build the structure and the data model to populate the content.</li>
<li><strong>Dynamic updates:</strong> As the user interacts with the application or as new information becomes available, the server can send additional <code>updateComponents</code> and <code>updateDataModel</code> messages to dynamically change the UI.</li>
<li><strong>Delete Surface:</strong> When a UI region is no longer needed, the server sends a <code>deleteSurface</code> message to remove it.</li>
</ol>
<div class="mermaid">sequenceDiagram
    participant Server
    participant Client

    Server-&gt;&gt;+Client: 1. createSurface(surfaceId: "main")
    Server-&gt;&gt;+Client: 2. updateComponents(surfaceId: "main", components: [...])
    Server-&gt;&gt;+Client: 3. updateDataModel(surfaceId: "main", path: "/user", value: "Alice")
    User-&gt;&gt;+Client: Interact with UI (e.g. click button)
    Client-&gt;&gt;+Server: action(name: "submit", context: {...})
    Client--&gt;&gt;-Server: (UI is displayed)

    Note over Client, Server: Time passes, user interacts, or new data arrives...

    Server-&gt;&gt;+Client: 4. updateComponents or updateDataModel (Dynamic Update)
    Note right of Client: Client re-renders the UI to reflect changes
    Client--&gt;&gt;-Server: (UI is updated)

    Server-&gt;&gt;+Client: 5. deleteSurface(surfaceId: "main")
    Note right of Client: Client removes the UI for the "main" surface
    Client--&gt;&gt;-Server: (UI is gone)
</div>
<h2 id="transport-decoupling">Transport decoupling<a class="headerlink" href="#transport-decoupling" title="Permanent link">¬∂</a></h2>
<p>The A2UI protocol is designed to be transport-agnostic. It defines the JSON message structure and the semantic contract between the server (Agent) and the client (Renderer), but it does not mandate a specific transport layer.</p>
<h3 id="the-transport-contract">The transport contract<a class="headerlink" href="#the-transport-contract" title="Permanent link">¬∂</a></h3>
<p>To support A2UI, a transport layer must fulfill the following contract:</p>
<ol>
<li><strong>Reliable delivery</strong>: Messages must be delivered in the order they were generated. A2UI relies on stateful updates (e.g., creating a surface before updating it), so out-of-order delivery can corrupt the UI state.</li>
<li><strong>Message framing</strong>: The transport must clearly delimit individual JSON envelope messages (e.g., using newlines in JSONL, WebSocket frames, or SSE events).</li>
<li><strong>Metadata support</strong>: The transport must provide a mechanism to associate metadata with messages. This is critical for:<ul>
<li><strong>Data model synchronization</strong>: The <code>sendDataModel</code> feature requires the client to send the current data model state as metadata alongside user actions.</li>
<li><strong>Capabilities exchange</strong>: Client capabilities (supported catalogs, custom components) are exchanged via metadata.</li>
</ul>
</li>
<li><strong>Bidirectional capability (optional)</strong>: While the rendering stream is unidirectional (Server -&gt; Client), interactive applications require a return channel for <code>action</code> messages (Client -&gt; Server).</li>
</ol>
<h3 id="transport-bindings">Transport bindings<a class="headerlink" href="#transport-bindings" title="Permanent link">¬∂</a></h3>
<p>While A2UI is agnostic, it is most commonly used with the following transports.</p>
<h4 id="a2a-agent2agent-binding">A2A (Agent2Agent) binding<a class="headerlink" href="#a2a-agent2agent-binding" title="Permanent link">¬∂</a></h4>
<p><a href="https://a2a-protocol.org/latest/">A2A (Agent-to-Agent)</a> is an excellent transport option for A2UI in agentic systems, extending A2A with additional payloads.
A2A is uniquely capable of handling remote agent communication, and can also provide a secure and effecient transport between an agentic backend and front end application.</p>
<ul>
<li><strong>Message mapping</strong>: Each A2UI envelope (e.g., <code>updateComponents</code>) corresponds to the payload of a single A2A message Part.</li>
<li><strong>Metadata</strong>:</li>
<li><strong>Data model</strong>: When <code>sendDataModel</code> is active, the client's <code>a2uiClientDataModel</code> object is placed in the <code>metadata</code> field of the A2A message.</li>
<li><strong>Capabilities</strong>: The <code>a2uiClientCapabilities</code> object is placed in the <code>metadata</code> field of every A2A message sent from the client to the server.</li>
<li><strong>Context</strong>: A2UI sessions typically map to A2A <code>contextId</code>. All messages for a set of related surfaces should share the same <code>contextId</code>.</li>
</ul>
<h4 id="ag-ui-agent-to-user-interface-binding">AG UI (Agent to User Interface) binding<a class="headerlink" href="#ag-ui-agent-to-user-interface-binding" title="Permanent link">¬∂</a></h4>
<p><strong><a href="https://docs.ag-ui.com/introduction">AG-UI</a></strong> is also an excellent transport option for A2UI Agent‚ÄìUser Interaction protocol.
AG UI provides convenient integrations into many agent frameworks and frontends. AG UI provides low latency and shared state message passing between front ends and agentic backends.</p>
<h4 id="other-transports">Other transports<a class="headerlink" href="#other-transports" title="Permanent link">¬∂</a></h4>
<p>A2UI can also be carried over:</p>
<ul>
<li><strong><a href="https://modelcontextprotocol.io/docs/getting-started/intro">MCP (Model Context Protocol)</a></strong>: Delivered as tool outputs or resource subscriptions.</li>
<li><strong><a href="https://en.wikipedia.org/wiki/Server-sent_events">SSE</a> with <a href="https://www.jsonrpc.org/">JSON RPC</a></strong>: Standard server-sent events for web integrations that support streaming, and JSON RPC for client-server communication.</li>
<li><strong><a href="https://en.wikipedia.org/wiki/WebSocket">WebSockets</a></strong>: For bidirectional, real-time sessions.</li>
<li><strong><a href="https://cloud.google.com/discover/what-is-rest-api?hl=en">REST</a></strong>: For simple use case, REST APIs will work but lack streaming capabilities.</li>
</ul>
<h2 id="the-protocol-schemas">The protocol schemas<a class="headerlink" href="#the-protocol-schemas" title="Permanent link">¬∂</a></h2>
<p>A2UI v0.9 is defined by three interacting JSON schemas.</p>
<h3 id="common-types">Common types<a class="headerlink" href="#common-types" title="Permanent link">¬∂</a></h3>
<p>The [<code>common_types.json</code>] schema defines reusable primitives used throughout the protocol.</p>
<ul>
<li><strong><code>DynamicString</code> / <code>DynamicNumber</code> / <code>DynamicBoolean</code> / <code>DynamicStringList</code></strong>: The core of the data binding system. Any property that can be bound to data is defined as a <code>Dynamic*</code> type. It accepts either a literal value, a <code>path</code> string (<a href="https://datatracker.ietf.org/doc/html/rfc6901">JSON Pointer</a>), or a <code>FunctionCall</code> (function call).</li>
<li><strong><code>ChildList</code></strong>: Defines how containers hold children. It supports:</li>
<li><code>array</code>: A static array of <code>ComponentId</code> component references.</li>
<li>
<p><code>object</code>: A template for generating children from a data binding list (requires a template <code>componentId</code> and a data binding <code>path</code>).</p>
</li>
<li>
<p><strong><code>ComponentId</code></strong>: A reference to the unique ID of another component within the same surface.</p>
</li>
</ul>
<h3 id="server-to-client-message-structure-the-envelope">Server to client message structure: the envelope<a class="headerlink" href="#server-to-client-message-structure-the-envelope" title="Permanent link">¬∂</a></h3>
<p>The [<code>server_to_client.json</code>] schema is the top-level entry point. Every message streamed by the server must validate against this schema. It handles the message dispatching.</p>
<h3 id="the-standard-catalog">The Standard Catalog<a class="headerlink" href="#the-standard-catalog" title="Permanent link">¬∂</a></h3>
<p>The [<code>standard_catalog.json</code>] schema contains the definitions for all specific UI components (e.g., <code>Text</code>, <code>Button</code>, <code>Row</code>), functions (e.g., <code>required</code>, <code>email</code>), and the theme schema.</p>
<p><strong>Swappable Catalogs &amp; Validation:</strong></p>
<p>The [<code>server_to_client.json</code>] envelope schema is designed to be catalog-agnostic. It references components and themes using a placeholder filename: <code>catalog.json</code> (specifically <code>$ref: "catalog.json#/$defs/anyComponent"</code> and <code>$ref: "catalog.json#/$defs/theme"</code>).</p>
<p>To validate A2UI messages:</p>
<ol>
<li><strong>Standard Catalog</strong>: Map <code>catalog.json</code> to <code>standard_catalog.json</code>.</li>
<li><strong>Custom Catalog</strong>: Map <code>catalog.json</code> to your custom catalog file (e.g., <code>my_custom_catalog.json</code>).</li>
</ol>
<p>This indirection allows the same core envelope schema to be used with any compliant component catalog without modification.</p>
<p>Custom catalogs can be used to define additional UI components or modify the behavior of existing components. To use a custom catalog, simply include it in the prompt in place of the standard catalog. It should have the same form as the standard catalog, and use common elements in the [<code>common_types.json</code>] schema.</p>
<h3 id="validator-compliance-custom-catalogs">Validator compliance &amp; custom catalogs<a class="headerlink" href="#validator-compliance-custom-catalogs" title="Permanent link">¬∂</a></h3>
<p>To ensure that automated validators can verify the integrity of your UI tree (checking that parents reference existing children), custom catalogs MUST adhere to the following strict typing rules:</p>
<ol>
<li>
<p><strong>Single child references:</strong> Any property that holds the ID of another component MUST use the <code>ComponentId</code> type defined in <code>common_types.json</code>.</p>
<ul>
<li>Use: <code>"$ref": "common_types.json#/$defs/ComponentId"</code></li>
<li>Do NOT use: <code>"type": "string"</code></li>
</ul>
</li>
<li>
<p><strong>List references:</strong> Any property that holds a list of children or a template MUST use the <code>ChildList</code> type.</p>
<ul>
<li>Use: <code>"$ref": "common_types.json#/$defs/ChildList"</code></li>
</ul>
</li>
</ol>
<p>Validators determine which fields represent structural links by looking for these specific schema references. If you use a raw string type for an ID, the validator will treat it as static text (like a URL or label) and will not check if the target component exists.</p>
<h2 id="envelope-message-structure">Envelope message structure<a class="headerlink" href="#envelope-message-structure" title="Permanent link">¬∂</a></h2>
<p>The envelope defines four primary message types, and every message streamed by the server must be a JSON object containing exactly one of the following keys: <code>createSurface</code>, <code>updateComponents</code>, <code>updateDataModel</code>, or <code>deleteSurface</code>. The key indicates the type of message, and these are the messages that make up each message in the protocol stream.</p>
<h3 id="createsurface"><code>createSurface</code><a class="headerlink" href="#createsurface" title="Permanent link">¬∂</a></h3>
<p>This message signals the client to create a new surface and begin rendering it. A surface must be created before any <code>updateComponents</code> or <code>updateDataModel</code> messages can be sent to it. While typically achieved by the agent sending a <code>createSurface</code> message, an agent may skip this if it knows the surface has already been created (e.g., by another agent). Once a surface is created, its <code>surfaceId</code> and <code>catalogId</code> are fixed; to reconfigure them, the surface must be deleted and recreated. One of the components in one of the component lists MUST have an <code>id</code> of <code>root</code> to serve as the root of the component tree.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>surfaceId</code> (string, required): The unique identifier for the UI surface to be rendered.</li>
<li><code>catalogId</code> (string, required): A string that uniquely identifies the catalog (components and functions) used for this surface. It is recommended to prefix this with an internet domain that you own, to avoid conflicts (e.g., <code>https://mycompany.com/1.0/somecatalog</code>). If it is a URL, the URL does not need to have any deployed resources, it is simply a unique identifier.</li>
<li><code>theme</code> (object, optional): A JSON object containing theme parameters (e.g., <code>primaryColor</code>) defined in the catalog's theme schema.</li>
<li><code>sendDataModel</code> (boolean, optional): If true, the client will send the full data model of this surface in the metadata of every message sent to the server (via the Transport's metadata mechanism). This ensures the surface owner receives the full current state of the UI alongside the user's action or query. Defaults to false.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">{</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">  </span><span class="nt">"createSurface"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_profile_card"</span><span class="p">,</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="nt">"catalogId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://a2ui.org/specification/v0_9/standard_catalog.json"</span><span class="p">,</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="nt">"theme"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">      </span><span class="nt">"primaryColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#00BFFF"</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="nt">"sendDataModel"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="updatecomponents"><code>updateComponents</code><a class="headerlink" href="#updatecomponents" title="Permanent link">¬∂</a></h3>
<p>This message provides a list of UI components to be added to or updated within a specific surface. The components are provided as a flat list, and their relationships are defined by ID references in an adjacency list. This message may only be sent to a surface that has already been created. Note that components may reference children or data bindings that do not yet exist; clients should handle this gracefully by rendering placeholders (progressive rendering).</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>surfaceId</code> (string, required): The unique identifier for the UI surface to be updated. This is typically a name with meaning (e.g. "user_profile_card"), and it has to be unique within the context of the GenUI session.</li>
<li><code>components</code> (array, required): A list of component objects. The components are provided as a flat list, and their relationships are defined by ID references in an adjacency list.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="p">{</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">  </span><span class="nt">"updateComponents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_profile_card"</span><span class="p">,</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="nt">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"root"</span><span class="p">,</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">        </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Column"</span><span class="p">,</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">        </span><span class="nt">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_title"</span><span class="p">]</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-1-12"><a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_name"</span><span class="p">,</span>
</span><span id="__span-1-13"><a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">        </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="p">,</span>
</span><span id="__span-1-14"><a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span>
</span><span id="__span-1-15"><a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-1-16"><a href="#__codelineno-1-16" id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-1-17"><a href="#__codelineno-1-17" id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_title"</span><span class="p">,</span>
</span><span id="__span-1-18"><a href="#__codelineno-1-18" id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">        </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="p">,</span>
</span><span id="__span-1-19"><a href="#__codelineno-1-19" id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Software Engineer"</span>
</span><span id="__span-1-20"><a href="#__codelineno-1-20" id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-1-21"><a href="#__codelineno-1-21" id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-1-22"><a href="#__codelineno-1-22" id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-23"><a href="#__codelineno-1-23" id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="updatedatamodel"><code>updateDataModel</code><a class="headerlink" href="#updatedatamodel" title="Permanent link">¬∂</a></h3>
<p>This message is used to send or update the data that populates the UI components. It allows the server to change the UI's content without resending the entire component structure. The <code>updateDataModel</code> message replaces the value at the specified <code>path</code> with the new content. If <code>path</code> is omitted (or is <code>/</code>), the entire data model for the surface is replaced.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>surfaceId</code> (string, required): The unique identifier for the UI surface this data model update applies to.</li>
<li><code>path</code> (string, optional): A JSON Pointer to the location in the data model to update. Defaults to <code>/</code>.</li>
<li><code>value</code> (any, optional): The new value for the specified path. If omitted, the key at <code>path</code> is removed.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="p">{</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span><span class="nt">"updateDataModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_profile_card"</span><span class="p">,</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/user/name"</span><span class="p">,</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="deletesurface"><code>deleteSurface</code><a class="headerlink" href="#deletesurface" title="Permanent link">¬∂</a></h3>
<p>This message instructs the client to remove a surface and all its associated components and data from the UI.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>surfaceId</code> (string, required): The unique identifier for the UI surface to be deleted.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="p">{</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span><span class="nt">"deleteSurface"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_profile_card"</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="example-stream">Example Stream<a class="headerlink" href="#example-stream" title="Permanent link">¬∂</a></h2>
<p>The following example demonstrates a complete interaction to render a Contact Form, expressed as a JSONL stream.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>{"version": "v0.9", "createSurface":{"surfaceId":"contact_form_1","catalogId":"https://a2ui.org/specification/v0_9/standard_catalog.json"}}
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>{"version": "v0.9", "updateComponents":{"surfaceId":"contact_form_1","components":[{"id":"root","component":"Card","child":"form_container"},{"id":"form_container","component":"Column","children":["header_row","name_row","email_group","phone_group","pref_group","divider_1","newsletter_checkbox","submit_button"],"justify":"start","align":"stretch"},{"id":"header_row","component":"Row","children":["header_icon","header_text"],"align":"center"},{"id":"header_icon","component":"Icon","name":"mail"},{"id":"header_text","component":"Text","text":"# Contact Us","variant":"h2"},{"id":"name_row","component":"Row","children":["first_name_group","last_name_group"],"justify":"spaceBetween"},{"id":"first_name_group","component":"Column","children":["first_name_label","first_name_field"],"weight":1},{"id":"first_name_label","component":"Text","text":"First Name","variant":"caption"},{"id":"first_name_field","component":"TextField","label":"First Name","value":{"path":"/contact/firstName"},"variant":"shortText"},{"id":"last_name_group","component":"Column","children":["last_name_label","last_name_field"],"weight":1},{"id":"last_name_label","component":"Text","text":"Last Name","variant":"caption"},{"id":"last_name_field","component":"TextField","label":"Last Name","value":{"path":"/contact/lastName"},"variant":"shortText"},{"id":"email_group","component":"Column","children":["email_label","email_field"]},{"id":"email_label","component":"Text","text":"Email Address","variant":"caption"},{"id":"email_field","component":"TextField","label":"Email","value":{"path":"/contact/email"},"variant":"shortText","checks":[{"call":"required","args":{"value":{"path":"/contact/email"}},"message":"Email is required."},{"call":"email","args":{"value":{"path":"/contact/email"}},"message":"Please enter a valid email address."}]},{"id":"phone_group","component":"Column","children":["phone_label","phone_field"]},{"id":"phone_label","component":"Text","text":"Phone Number","variant":"caption"},{"id":"phone_field","component":"TextField","label":"Phone","value":{"path":"/contact/phone"},"variant":"shortText","checks":[{"call":"regex","args":{"value":{"path":"/contact/phone"},"pattern":"^\\d{10}$"},"message":"Phone number must be 10 digits."}]},{"id":"pref_group","component":"Column","children":["pref_label","pref_picker"]},{"id":"pref_label","component":"Text","text":"Preferred Contact Method","variant":"caption"},{"id":"pref_picker","component":"ChoicePicker","variant":"mutuallyExclusive","options":[{"label":"Email","value":"email"},{"label":"Phone","value":"phone"},{"label":"SMS","value":"sms"}],"value":{"path":"/contact/preference"}},{"id":"divider_1","component":"Divider","axis":"horizontal"},{"id":"newsletter_checkbox","component":"CheckBox","label":"Subscribe to our newsletter","value":{"path":"/contact/subscribe"}},{"id":"submit_button_label","component":"Text","text":"Send Message"},{"id":"submit_button","component":"Button","child":"submit_button_label","variant":"primary","action":{"event":{"name":"submitContactForm","context":{"formId":"contact_form_1","clientTime":{"call":"formatDate","args":{"value": "2026-02-02T15:17:00Z", "format": "E MMM d, YYYY h:mm a"},"returnType":"string"},"isNewsletterSubscribed":{"path":"/contact/subscribe"}}}}}]}}
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>{"version": "v0.9", "updateDataModel":{"surfaceId":"contact_form_1","path":"/contact","value":{"firstName":"John","lastName":"Doe","email":"john.doe@example.com","phone":"1234567890","preference":["email"],"subscribe":true}}}
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>{"version": "v0.9", "deleteSurface":{"surfaceId":"contact_form_1"}}
</span></code></pre></div>
<h2 id="component-model">Component model<a class="headerlink" href="#component-model" title="Permanent link">¬∂</a></h2>
<p>A2UI's component model is designed for flexibility, separating the protocol's structure from the set of available UI components.</p>
<h3 id="the-component-object">The component object<a class="headerlink" href="#the-component-object" title="Permanent link">¬∂</a></h3>
<p>Each object in the <code>components</code> array of an <code>updateComponents</code> message defines a single UI component. It has the following structure:</p>
<ul>
<li><code>id</code> (<code>ComponentId</code>, required): A unique string that identifies this specific component instance. This is used for parent-child references.</li>
<li><code>component</code> (string, required): Specifies the component's type (e.g., <code>"Text"</code>).</li>
<li><strong>Component Properties</strong>: Other properties relevant to the specific component type (e.g., <code>text</code>, <code>url</code>, <code>children</code>) are included directly in the component object.</li>
</ul>
<p>This structure is designed to be both flexible and strictly validated.</p>
<h3 id="the-component-catalog">The component catalog<a class="headerlink" href="#the-component-catalog" title="Permanent link">¬∂</a></h3>
<p>The set of available UI components and functions is defined in a <strong>Catalog</strong>. The standard catalog is defined in [<code>standard_catalog.json</code>]. This allows for different clients to support different sets of components and functions, including custom ones. Advanced use cases may want to define their own custom catalogs to support custom front end design systems or renderers. The server must generate messages that conform to the catalog understood by the client.</p>
<h3 id="ui-composition-the-adjacency-list-model">UI composition: the adjacency list model<a class="headerlink" href="#ui-composition-the-adjacency-list-model" title="Permanent link">¬∂</a></h3>
<p>The A2UI protocol defines the UI as a flat list of components. The tree structure is built implicitly using ID references. This is known as an adjacency list model.</p>
<p>Container components (like <code>Row</code>, <code>Column</code>, <code>List</code>, and <code>Card</code>) have properties that reference the <code>id</code> of their child component(s). The client is responsible for storing all components in a map (e.g., <code>Map&lt;String, Component&gt;</code>) and recreating the tree structure at render time.</p>
<p>This model allows the server to send component definitions in any order. Rendering can begin as soon as the <code>root</code> component is defined, with the client filling in or updating the rest of the tree progressively as additional definitions arrive.</p>
<p>There must be exactly one component with the ID <code>root</code> in the component tree, acting as the root of the component tree. Until that component is defined, other component updates will have no visible effect, and they will be buffered until a root component is defined. Once a root component is defined, the client is responsible for rendering the tree in the best way possible based on the available data, skipping invalid references.</p>
<div class="mermaid">flowchart TD
    subgraph "Server Stream"
        A("<b>updateComponents</b><br/>components: [root, title, button]")
    end

    subgraph "Client-Side Buffer (Map)"
        C("root: {id: 'root', component: 'Column', children: ['title', 'button']}")
        D("title: {id: 'title', component: 'Text', text: 'Welcome'}")
        E("button: {id: 'button', component: 'Button', child: 'button_label'}")
    end

    subgraph "Rendered Widget Tree"
        F(Column) --&gt; G(Text: 'Welcome')
        F --&gt; H(Button)
    end

    A -- "Parsed and stored" --&gt; C
    A -- "Parsed and stored" --&gt; D
    A -- "Parsed and stored" --&gt; E

</div>
<h3 id="defining-actions">Defining actions<a class="headerlink" href="#defining-actions" title="Permanent link">¬∂</a></h3>
<p>Interactive components (like <code>Button</code>) use an <code>action</code> property to define what happens when the user interacts with them. Actions can either trigger an event sent to the server or execute a local client-side function.</p>
<h4 id="server-actions">Server actions<a class="headerlink" href="#server-actions" title="Permanent link">¬∂</a></h4>
<p>To send an event to the server, use the <code>event</code> property within the <code>action</code> object. It requires a <code>name</code> and an optional <code>context</code>.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="p">{</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button"</span><span class="p">,</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Submit"</span><span class="p">,</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submit_form"</span><span class="p">,</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">        </span><span class="nt">"itemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="local-actions">Local actions<a class="headerlink" href="#local-actions" title="Permanent link">¬∂</a></h4>
<p>To execute a local function, use the <code>functionCall</code> property within the <code>action</code> object. This property references a standard <code>FunctionCall</code> object.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="p">{</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button"</span><span class="p">,</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Open Link"</span><span class="p">,</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="nt">"functionCall"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">      </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"openUrl"</span><span class="p">,</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">      </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${/url}"</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="data-model-representation-binding-scope">Data model representation: binding, scope<a class="headerlink" href="#data-model-representation-binding-scope" title="Permanent link">¬∂</a></h2>
<p>This section describes how UI components <strong>represent</strong> and reference data from the Data Model. A2UI relies on a strictly defined relationship between the UI structure (Components) and the state (Data Model), defining the mechanics of path resolution, variable scope during iteration.</p>
<h3 id="path-resolution-scope">Path resolution &amp; scope<a class="headerlink" href="#path-resolution-scope" title="Permanent link">¬∂</a></h3>
<p>Data bindings in A2UI are defined using <strong>JSON Pointers</strong> (<a href="https://datatracker.ietf.org/doc/html/rfc6901">RFC 6901</a>). How a pointer is resolved depends on the current <strong>Evaluation Scope</strong>.</p>
<blockquote>
<p><strong>Note on progressive rendering:</strong> During the initial streaming phase, data paths may resolve to <code>undefined</code> if the <code>updateDataModel</code> message containing that data has not yet arrived. Renderers should handle <code>undefined</code> values gracefully (e.g., by treating them as empty strings or showing a loading indicator) to support progressive rendering.</p>
</blockquote>
<h4 id="the-root-scope">The root scope<a class="headerlink" href="#the-root-scope" title="Permanent link">¬∂</a></h4>
<p>By default, all components operate in the <strong>Root Scope</strong>.</p>
<ul>
<li>Paths starting with <code>/</code> (e.g., <code>/user/profile/name</code>) are <strong>Absolute Paths</strong>. They always resolve from the root of the Data Model, regardless of where the component is nested in the UI tree.</li>
</ul>
<h4 id="collection-scopes-relative-paths">Collection scopes (relative paths)<a class="headerlink" href="#collection-scopes-relative-paths" title="Permanent link">¬∂</a></h4>
<p>When a container component (such as <code>Column</code>, <code>Row</code>, or <code>List</code>) utilizes the <strong>Template</strong> feature of <code>ChildList</code>, it creates a new <strong>Child Scope</strong> for each item in the bound array.</p>
<ul>
<li><strong>Template definition:</strong> When a container binds its children to a path (e.g., <code>path: "/users"</code>), the client iterates over the array found at that location.</li>
<li><strong>Scope instantiation:</strong> For every item in the array, the client instantiates the template component.</li>
<li><strong>Relative resolution:</strong> Inside these instantiated components, any path that <strong>does not</strong> start with a forward slash <code>/</code> is treated as a <strong>Relative Path</strong>.</li>
<li>
<p>A relative path <code>firstName</code> inside a template iterating over <code>/users</code> resolves to <code>/users/0/firstName</code> for the first item, <code>/users/1/firstName</code> for the second, etc.</p>
</li>
<li>
<p><strong>Mixing scopes:</strong> Components inside a Child Scope can still access the Root Scope by using an Absolute Path.</p>
</li>
</ul>
<h4 id="example-scope-resolution">Example: scope resolution<a class="headerlink" href="#example-scope-resolution" title="Permanent link">¬∂</a></h4>
<p><strong>Data model:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="p">{</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="nt">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Acme Corp"</span><span class="p">,</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">  </span><span class="nt">"employees"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alice"</span><span class="p">,</span><span class="w"> </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Engineer"</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w"> </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Designer"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Component definition:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="p">{</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"employee_list"</span><span class="p">,</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"List"</span><span class="p">,</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="nt">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/employees"</span><span class="p">,</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="nt">"componentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"employee_card_template"</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">},</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">{</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"employee_card_template"</span><span class="p">,</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Column"</span><span class="p">,</span>
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">  </span><span class="nt">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"name_text"</span><span class="p">,</span><span class="w"> </span><span class="s2">"company_text"</span><span class="p">]</span>
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="p">},</span>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="p">{</span>
</span><span id="__span-8-15"><a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name_text"</span><span class="p">,</span>
</span><span id="__span-8-16"><a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="p">,</span>
</span><span id="__span-8-17"><a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-8-18"><a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">  </span><span class="c1">// "name" is Relative. Resolves to /employees/N/name</span>
</span><span id="__span-8-19"><a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="p">},</span>
</span><span id="__span-8-20"><a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="p">{</span>
</span><span id="__span-8-21"><a href="#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"company_text"</span><span class="p">,</span>
</span><span id="__span-8-22"><a href="#__codelineno-8-22" id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="p">,</span>
</span><span id="__span-8-23"><a href="#__codelineno-8-23" id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="w">  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/company"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-8-24"><a href="#__codelineno-8-24" id="__codelineno-8-24" name="__codelineno-8-24"></a><span class="w">  </span><span class="c1">// "/company" is Absolute. Resolves to "Acme Corp" globally.</span>
</span><span id="__span-8-25"><a href="#__codelineno-8-25" id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="type-conversion">Type conversion<a class="headerlink" href="#type-conversion" title="Permanent link">¬∂</a></h4>
<p>When a non-string value is interpolated, the client converts it to a string:</p>
<ul>
<li><strong>Numbers/Booleans</strong>: Standard string representation.</li>
<li><strong>null/undefined</strong>: An empty string <code>""</code>.</li>
<li><strong>Objects/Arrays</strong>: Stringified as JSON to ensure consistency across different client implementations.</li>
</ul>
<h3 id="two-way-binding-input-components">Two-way binding &amp; input components<a class="headerlink" href="#two-way-binding-input-components" title="Permanent link">¬∂</a></h3>
<p>Interactive components that accept user input (<code>TextField</code>, <code>CheckBox</code>, <code>Slider</code>, <code>ChoicePicker</code>, <code>DateTimeInput</code>) establish a <strong>Two-Way Binding</strong> with the Data Model.</p>
<h4 id="the-readwrite-contract">The read/write contract<a class="headerlink" href="#the-readwrite-contract" title="Permanent link">¬∂</a></h4>
<p>Unlike static display components (like <code>Text</code>), input components modify the client-side data model immediately upon user interaction.</p>
<ol>
<li><strong>Read (Model -&gt; View):</strong> When the component renders, it reads its value from the bound <code>path</code>. If the Data Model is updated via <code>updateDataModel</code>, the component re-renders to reflect the new value.</li>
<li><strong>Write (View -&gt; Model):</strong> When the user interacts with the component (e.g., types a character, toggles a box), the client <strong>immediately</strong> updates the value at the bound <code>path</code> in the local Data Model.</li>
</ol>
<h4 id="reactivity">Reactivity<a class="headerlink" href="#reactivity" title="Permanent link">¬∂</a></h4>
<p>Because the local Data Model is the single source of truth, updates from input components are <strong>reactive</strong>.</p>
<ul>
<li>If a <code>TextField</code> is bound to <code>/user/name</code>, and a separate <code>Text</code> label is also bound to <code>/user/name</code>, the label must update in real-time as the user types in the text field.</li>
</ul>
<h4 id="server-synchronization">Server synchronization<a class="headerlink" href="#server-synchronization" title="Permanent link">¬∂</a></h4>
<p>It is critical to note that Two-Way Binding is <strong>local to the client</strong>.</p>
<ul>
<li>User inputs (keystrokes, toggles) do <strong>not</strong> automatically trigger network requests to the server.</li>
<li>The updated state is sent to the server only when a specific <strong>User Action</strong> is triggered (e.g., a <code>Button</code> click).</li>
<li>When an <code>action</code> is dispatched, the <code>context</code> property of the action can reference the modified data paths to send the user's input back to the server.</li>
</ul>
<h4 id="example-form-submission-pattern">Example: form submission pattern<a class="headerlink" href="#example-form-submission-pattern" title="Permanent link">¬∂</a></h4>
<ol>
<li><strong>Bind:</strong> <code>TextField</code> is bound to <code>/formData/email</code>.</li>
<li><strong>Interact:</strong> User types "jane@example.com". The local model at <code>/formData/email</code> is updated.</li>
<li>
<p><strong>Action:</strong> A "Submit" button has the following action definition:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submit_form"</span><span class="p">,</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/formData/email"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="p">}</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Send:</strong> When clicked, the client resolves <code>/formData/email</code> (getting "jane@example.com") and sends it in the <code>action</code> payload.</p>
</li>
</ol>
<h2 id="data-model-updates-synchronization-and-convergence">Data model updates: synchronization and convergence<a class="headerlink" href="#data-model-updates-synchronization-and-convergence" title="Permanent link">¬∂</a></h2>
<p>While the sections above describe how components reference data, this section defines how the Data Model itself is <strong>updated</strong> and synchronized.</p>
<p>To support reliable data synchronization between the Renderer and the Agent that created the surface, the A2UI protocol uses a simple synchronization mechanism controlled by the <code>sendDataModel</code> property in the <code>createSurface</code> message.</p>
<h3 id="server-to-client-updates">Server to client updates<a class="headerlink" href="#server-to-client-updates" title="Permanent link">¬∂</a></h3>
<p>The server sends <code>updateDataModel</code> messages to modify the client's data model. These updates follow strict upsert semantics:</p>
<ul>
<li>If the path exists, the value is updated.</li>
<li>If the path does not exist, the value is created.</li>
<li>If the value is <code>null</code>, the key at that path is removed.</li>
</ul>
<p>The <code>updateDataModel</code> message replaces the value at the specified <code>path</code> with the new content. If <code>path</code> is omitted (or is <code>/</code>), the entire data model for the surface is replaced.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>surfaceId</code> (string, required): The ID of the surface to update.</li>
<li><code>path</code> (string, optional): A JSON Pointer to the location in the data model to update. Defaults to <code>/</code>.</li>
<li><code>value</code> (any, optional): The new value for the specified path. If omitted, the key at <code>path</code> is removed.</li>
</ul>
<p><strong>Examples:</strong></p>
<p><em>Update a specific field:</em></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="p">{</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="nt">"updateDataModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surface_123"</span><span class="p">,</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/user/firstName"</span><span class="p">,</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alice"</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="p">}</span>
</span></code></pre></div>
<p><em>Remove a field:</em></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="p">{</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="nt">"updateDataModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surface_123"</span><span class="p">,</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/user/tempData"</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="p">}</span>
</span></code></pre></div>
<p><em>Replace the entire data model:</em></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.9"</span><span class="p">,</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span><span class="nt">"updateDataModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surface_123"</span><span class="p">,</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">      </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alice"</span><span class="p">,</span><span class="w"> </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">      </span><span class="nt">"preferences"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"theme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dark"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="client-to-server-updates">Client to server updates<a class="headerlink" href="#client-to-server-updates" title="Permanent link">¬∂</a></h3>
<p>When <code>sendDataModel</code> is set to <code>true</code> for a surface, the client automatically appends the <strong>entire data model</strong> of that surface to the metadata of every message (such as <code>action</code> or user query) sent to the server that created the surface. The data model is included using the transport's metadata facility (e.g., the <code>metadata</code> field in A2A or a header in HTTP). The payload follows the schema in <a href="../json/a2ui_client_data_model.json"><code>a2ui_client_data_model.json</code></a>.</p>
<ul>
<li><strong>Targeted Delivery</strong>: The data model is sent exclusively to the server that created the surface. Data cannot leak to other agents or servers.</li>
<li><strong>Trigger:</strong> Data is sent only when a client-to-server message is triggered (e.g., by a user action like a button click). Passive data changes (like typing in a text field) do not trigger a network request on their own; they simply update the local state, which will be sent with the next action.</li>
<li><strong>Payload:</strong> The data model is included in the transport metadata, tagged by its <code>surfaceId</code>.</li>
<li><strong>Convergence:</strong> The server treats the received data model as the current state of the client at the time of the action.</li>
</ul>
<h2 id="client-side-logic-validation">Client-side logic &amp; validation<a class="headerlink" href="#client-side-logic-validation" title="Permanent link">¬∂</a></h2>
<p>A2UI v0.9 generalizes client-side logic into <strong>Functions</strong>. These can be used for validation, data transformation, and dynamic property binding.</p>
<h3 id="registered-functions">Registered functions<a class="headerlink" href="#registered-functions" title="Permanent link">¬∂</a></h3>
<p>The client supports a set of named <strong>Functions</strong> (e.g., <code>required</code>, <code>regex</code>, <code>email</code>, <code>add</code>, <code>concat</code>) which are defined in the JSON schema (e.g. <code>standard_catalog.json</code>) alongside the component definitions. The server references these functions by name in <code>FunctionCall</code> objects. This avoids sending executable code.</p>
<p>Input components (like <code>TextField</code>, <code>CheckBox</code>) can define a list of checks. Each failure produces a specific error message that can be displayed when the component is rendered. Note that for validation checks, the function must return a boolean.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nt">"checks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">    </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/formData/zip"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zip code is required"</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">    </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regex"</span><span class="p">,</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/formData/zip"</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">      </span><span class="nt">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^[0-9]{5}$"</span>
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Must be a 5-digit zip code"</span>
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="p">]</span>
</span></code></pre></div>
<h3 id="example-button-validation">Example: button validation<a class="headerlink" href="#example-button-validation" title="Permanent link">¬∂</a></h3>
<p>Buttons can also define <code>checks</code>. If any check fails, the button is automatically disabled. This allows the button's state to depend on the validity of data in the model.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="p">{</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button"</span><span class="p">,</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Submit"</span><span class="p">,</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="nt">"checks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">      </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">        </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"and"</span><span class="p">,</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">        </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">          </span><span class="nt">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">              </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">              </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/formData/terms"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-13"><a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-14-14"><a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-14-15"><a href="#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">              </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"or"</span><span class="p">,</span>
</span><span id="__span-14-16"><a href="#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="w">              </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-17"><a href="#__codelineno-14-17" id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="w">                </span><span class="nt">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-14-18"><a href="#__codelineno-14-18" id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="w">                  </span><span class="p">{</span>
</span><span id="__span-14-19"><a href="#__codelineno-14-19" id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="w">                    </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
</span><span id="__span-14-20"><a href="#__codelineno-14-20" id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="w">                    </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/formData/email"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-21"><a href="#__codelineno-14-21" id="__codelineno-14-21" name="__codelineno-14-21"></a><span class="w">                  </span><span class="p">},</span>
</span><span id="__span-14-22"><a href="#__codelineno-14-22" id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="w">                  </span><span class="p">{</span>
</span><span id="__span-14-23"><a href="#__codelineno-14-23" id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">                    </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
</span><span id="__span-14-24"><a href="#__codelineno-14-24" id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">                    </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/formData/phone"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-25"><a href="#__codelineno-14-25" id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="w">                  </span><span class="p">}</span>
</span><span id="__span-14-26"><a href="#__codelineno-14-26" id="__codelineno-14-26" name="__codelineno-14-26"></a><span class="w">                </span><span class="p">]</span>
</span><span id="__span-14-27"><a href="#__codelineno-14-27" id="__codelineno-14-27" name="__codelineno-14-27"></a><span class="w">              </span><span class="p">}</span>
</span><span id="__span-14-28"><a href="#__codelineno-14-28" id="__codelineno-14-28" name="__codelineno-14-28"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-14-29"><a href="#__codelineno-14-29" id="__codelineno-14-29" name="__codelineno-14-29"></a><span class="w">          </span><span class="p">]</span>
</span><span id="__span-14-30"><a href="#__codelineno-14-30" id="__codelineno-14-30" name="__codelineno-14-30"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-14-31"><a href="#__codelineno-14-31" id="__codelineno-14-31" name="__codelineno-14-31"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-14-32"><a href="#__codelineno-14-32" id="__codelineno-14-32" name="__codelineno-14-32"></a><span class="w">      </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You must accept terms AND provide either email or phone"</span>
</span><span id="__span-14-33"><a href="#__codelineno-14-33" id="__codelineno-14-33" name="__codelineno-14-33"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-34"><a href="#__codelineno-14-34" id="__codelineno-14-34" name="__codelineno-14-34"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-14-35"><a href="#__codelineno-14-35" id="__codelineno-14-35" name="__codelineno-14-35"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="standard-component-catalog">Standard Component Catalog<a class="headerlink" href="#standard-component-catalog" title="Permanent link">¬∂</a></h2>
<p>The [<code>standard_catalog.json</code>] provides the baseline set of components and functions.</p>
<h3 id="components">Components<a class="headerlink" href="#components" title="Permanent link">¬∂</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Component</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Text</strong></td>
<td style="text-align: left;">Displays text. Supports simple Markdown.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Image</strong></td>
<td style="text-align: left;">Displays an image from a URL.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Icon</strong></td>
<td style="text-align: left;">Displays a system-provided icon from a predefined list.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Video</strong></td>
<td style="text-align: left;">Displays a video from a URL.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>AudioPlayer</strong></td>
<td style="text-align: left;">A player for audio content from a URL.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Row</strong></td>
<td style="text-align: left;">A horizontal layout container.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Column</strong></td>
<td style="text-align: left;">A vertical layout container.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>List</strong></td>
<td style="text-align: left;">A scrollable list of components.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Card</strong></td>
<td style="text-align: left;">A container with card-like styling.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Tabs</strong></td>
<td style="text-align: left;">A set of tabs, each with a title and child component.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Divider</strong></td>
<td style="text-align: left;">A horizontal or vertical dividing line.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Modal</strong></td>
<td style="text-align: left;">A dialog that appears over the main content triggered by a button in the main content.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Button</strong></td>
<td style="text-align: left;">A clickable button that dispatches an action. Supports 'primary' and 'borderless' variants.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>CheckBox</strong></td>
<td style="text-align: left;">A checkbox with a label and a boolean value.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>TextField</strong></td>
<td style="text-align: left;">A field for user text input.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>DateTimeInput</strong></td>
<td style="text-align: left;">An input for date and/or time.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ChoicePicker</strong></td>
<td style="text-align: left;">A component for selecting one or more options.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Slider</strong></td>
<td style="text-align: left;">A slider for selecting a numeric value within a range.</td>
</tr>
</tbody>
</table>
<h3 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">¬∂</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>required</strong></td>
<td style="text-align: left;">Checks that the value is not null, undefined, or empty.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>regex</strong></td>
<td style="text-align: left;">Checks that the value matches a regular expression string.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>length</strong></td>
<td style="text-align: left;">Checks string length constraints.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>numeric</strong></td>
<td style="text-align: left;">Checks numeric range constraints.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>email</strong></td>
<td style="text-align: left;">Checks that the value is a valid email address.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>formatString</strong></td>
<td style="text-align: left;">Does string interpolation of data model values and registered functions.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>formatNumber</strong></td>
<td style="text-align: left;">Formats a number with grouping and precision.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>formatCurrency</strong></td>
<td style="text-align: left;">Formats a number as a currency string.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>formatDate</strong></td>
<td style="text-align: left;">Formats a date/time using a pattern.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>pluralize</strong></td>
<td style="text-align: left;">Selects a localized string based on a numeric count.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>openUrl</strong></td>
<td style="text-align: left;">Opens a URL in a browser.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>and</strong></td>
<td style="text-align: left;">Logical AND operation on a list of boolean values.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>or</strong></td>
<td style="text-align: left;">Logical OR operation on a list of boolean values.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>not</strong></td>
<td style="text-align: left;">Logical NOT operation on a boolean value.</td>
</tr>
</tbody>
</table>
<h3 id="theme">Theme<a class="headerlink" href="#theme" title="Permanent link">¬∂</a></h3>
<p>The standard catalog defines the following theme properties that can be set in the <code>createSurface</code> message:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>primaryColor</strong></td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">The primary brand color used for highlights throughout the UI (e.g., primary buttons, active borders). The renderer may generate variants, such as lighter shades, as needed. Format: Hexadecimal code (e.g., '#00BFFF').</td>
</tr>
<tr>
<td style="text-align: left;"><strong>iconUrl</strong></td>
<td style="text-align: left;">URI</td>
<td style="text-align: left;">A URL for an image (e.g., logo or avatar) that identifies the agent or tool associated with the surface.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>agentDisplayName</strong></td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Text to be displayed next to the surface to identify the agent or tool that created it (e.g. "Weather Bot").</td>
</tr>
</tbody>
</table>
<h4 id="identity-and-attribution">Identity and attribution<a class="headerlink" href="#identity-and-attribution" title="Permanent link">¬∂</a></h4>
<p>The <code>iconUrl</code> and <code>agentDisplayName</code> fields are used to provide attribution to the user, identifying which sub-agent or tool is responsible for a particular UI surface.</p>
<p>In multi-agent systems or orchestrators, the orchestrator is responsible for setting or validating these fields. This ensures that the identity displayed to the user matches the actual agent server being contacted, preventing malicious agents from impersonating trusted services. For example, an orchestrator might overwrite these fields with the verified identity of the sub-agent before forwarding the <code>createSurface</code> message to the client.</p>
<h3 id="the-formatstring-function">The <code>formatString</code> function<a class="headerlink" href="#the-formatstring-function" title="Permanent link">¬∂</a></h3>
<p>The <code>formatString</code> function supports embedding dynamic expressions directly within string properties. This allows for mixing static text with data model values and function results.</p>
<h4 id="formatstring-syntax"><code>formatString</code> syntax<a class="headerlink" href="#formatstring-syntax" title="Permanent link">¬∂</a></h4>
<p>Interpolated expressions are enclosed in <code>${...}</code>. To include a literal <code>${</code> in a string, it must be escaped as <code>\${</code>.</p>
<h4 id="formatstring-data-model-binding"><code>formatString</code> data model binding<a class="headerlink" href="#formatstring-data-model-binding" title="Permanent link">¬∂</a></h4>
<p>Values from the data model can be interpolated using their JSON Pointer path.</p>
<ul>
<li><code>${/user/profile/name}</code>: Absolute path.</li>
<li><code>${firstName}</code>: Relative path (resolved against the current collection scope).</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="p">{</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_welcome"</span><span class="p">,</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">  </span><span class="nt">"component"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="p">,</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">    </span><span class="nt">"call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"formatString"</span><span class="p">,</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">    </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello, ${/user/firstName}! Welcome back to ${/appName}."</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="formatstring-client-side-functions"><code>formatString</code> client-side functions<a class="headerlink" href="#formatstring-client-side-functions" title="Permanent link">¬∂</a></h4>
<p>Results of client-side functions can be interpolated. Function calls are identified by the presence of parentheses <code>()</code>.</p>
<ul>
<li><code>${now()}</code>: A function with no arguments.</li>
<li><code>${formatDate(value:${/currentDate}, format:'yyyy-MM-dd')}</code>: A function with named arguments.</li>
</ul>
<p>Arguments can be <strong>Literals</strong> (quoted strings, numbers, or booleans), or <strong>Nested Expressions</strong>.</p>
<h4 id="formatstring-nested-interpolation"><code>formatString</code> nested interpolation<a class="headerlink" href="#formatstring-nested-interpolation" title="Permanent link">¬∂</a></h4>
<p>Expressions can be nested using additional <code>${...}</code> wrappers inside an outer expression to make bindings explicit or to chain function calls.</p>
<ul>
<li><strong>Explicit Binding</strong>: <code>${formatDate(value:${/currentDate}, format:'yyyy-MM-dd')}</code></li>
<li><strong>Nested Functions</strong>: <code>${upper(${now()})}</code></li>
</ul>
<h4 id="formatstring-type-conversion"><code>formatString</code> type conversion<a class="headerlink" href="#formatstring-type-conversion" title="Permanent link">¬∂</a></h4>
<p>When a non-string value is interpolated, the client converts it to a string:</p>
<ul>
<li><strong>Numbers/Booleans</strong>: Standard string representation.</li>
<li><strong>Null/Undefined</strong>: An empty string <code>""</code>.</li>
<li><strong>Objects/Arrays</strong>: Stringified as JSON to ensure consistency across different client implementations.</li>
</ul>
<h2 id="usage-pattern-the-prompt-generate-validate-loop">Usage pattern: the prompt-generate-validate loop<a class="headerlink" href="#usage-pattern-the-prompt-generate-validate-loop" title="Permanent link">¬∂</a></h2>
<p>The A2UI protocol is designed to be used in a three-step loop with a Large Language Model:</p>
<ol>
<li>
<p><strong>Prompt</strong>: Construct a prompt for the LLM that includes:</p>
<ul>
<li>The desired UI to be generated.</li>
<li>The A2UI JSON schema, including the component catalog.</li>
<li>Examples of valid A2UI JSON.</li>
</ul>
</li>
<li>
<p><strong>Generate</strong>: Send the prompt to the LLM and receive the generated JSON output.</p>
</li>
<li>
<p><strong>Validate</strong>: Validate the generated JSON against the A2UI schema. If the JSON is valid, it can be sent to the client for rendering. If it is invalid, the errors can be reported back to the LLM in a subsequent prompt, allowing it to self-correct.</p>
</li>
</ol>
<p>This loop allows for a high degree of flexibility and robustness, as the system can leverage the generative capabilities of the LLM while still enforcing the structural integrity of the UI protocol.</p>
<h3 id="standard-validation-error-format">Standard validation error format<a class="headerlink" href="#standard-validation-error-format" title="Permanent link">¬∂</a></h3>
<p>If validation fails, the client (or the system acting on behalf of the client) should send an <code>error</code> message back to the LLM. To ensure the LLM can understand and correct the error, use the following standard format within the <code>error</code> message payload:</p>
<ul>
<li><code>code</code> (string, required): Must be <code>"VALIDATION_FAILED"</code>.</li>
<li><code>surfaceId</code> (string, required): The ID of the surface where the error occurred.</li>
<li><code>path</code> (string, required): The JSON pointer to the field that failed validation (e.g. <code>/components/0/text</code>).</li>
<li><code>message</code> (string, required): A short one-sentence description of why validation failed.</li>
</ul>
<p><strong>Example error message:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="p">{</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VALIDATION_FAILED"</span><span class="p">,</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="nt">"surfaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_profile_card"</span><span class="p">,</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/components/0/text"</span><span class="p">,</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Expected stringOrPath, got integer"</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="client-to-server-messages">Client-to-server messages<a class="headerlink" href="#client-to-server-messages" title="Permanent link">¬∂</a></h2>
<p>The protocol also defines messages that the client can send to the server, which are defined in the [<code>client_to_server.json</code>] schema. These are used for handling user interactions and reporting client-side information.</p>
<h3 id="action"><code>action</code><a class="headerlink" href="#action" title="Permanent link">¬∂</a></h3>
<p>This message is sent when the user interacts with a component that has an <code>action</code> defined, such as a <code>Button</code>.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>name</code> (string, required): The name of the action.</li>
<li><code>surfaceId</code> (string, required): The ID of the surface where the action originated.</li>
<li><code>sourceComponentId</code> (string, required): The ID of the component that triggered the action.</li>
<li><code>timestamp</code> (string, required): An ISO 8601 timestamp.</li>
<li><code>context</code> (object, required): A JSON object containing any context provided in the component's <code>action</code> property.</li>
</ul>
<h3 id="client-capabilities-metadata">Client capabilities &amp; metadata<a class="headerlink" href="#client-capabilities-metadata" title="Permanent link">¬∂</a></h3>
<p>In A2UI v0.9, client capabilities and other metadata are sent as part of the <strong>Transport metadata</strong> (e.g., A2A metadata) envelope in every message, rather than as first-class A2UI messages.</p>
<h4 id="client-capabilities">Client capabilities<a class="headerlink" href="#client-capabilities" title="Permanent link">¬∂</a></h4>
<p>The <code>a2uiClientCapabilities</code> object in the metadata follows the [<code>a2ui_client_capabilities.json</code>] schema.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>supportedCatalogIds</code> (array of strings, required): URIs of supported catalogs.</li>
<li><code>inlineCatalogs</code>: An array of inline catalog definitions provided directly by the client (useful for custom or ad-hoc components and functions).</li>
</ul>
<h4 id="client-data-model">Client data model<a class="headerlink" href="#client-data-model" title="Permanent link">¬∂</a></h4>
<p>When <code>sendDataModel</code> is enabled for a surface, the client includes the <code>a2uiClientDataModel</code> object in the metadata, following the [<code>a2ui_client_data_model.json</code>] schema.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>surfaces</code> (object, required): A map of surface IDs to their current data models.</li>
</ul>
<h3 id="error"><code>error</code><a class="headerlink" href="#error" title="Permanent link">¬∂</a></h3>
<p>This message is used to report a client-side error to the server.</p>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: A2A Extension" class="md-footer__link md-footer__link--prev" href="../v0.8-a2a-extension/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                A2A Extension
              </div>
</div>
</a>
<a aria-label="Next: Evolution Guide" class="md-footer__link md-footer__link--next" href="../v0.9-evolution-guide/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Evolution Guide
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright Google 2025¬†¬†|¬†¬†<a href="//policies.google.com/terms">Terms</a>¬†¬†|¬†¬†<a href="//policies.google.com/privacy">Privacy</a>¬†¬†|¬†¬†<a href="#__consent">Manage cookies</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find the information they need. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="analytics" type="checkbox"/>
<span class="task-list-indicator"></span>
      Google Analytics
    </label>
</li>
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="github" type="checkbox"/>
<span class="task-list-indicator"></span>
      GitHub
    </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["announce.dismiss", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>